
<% layout("/layouts/boilerplate.ejs") %>
<body> 
<div class="dashboard-container">
    <%- include("../includes/admin_sidebar.ejs") %>

    <div class="content">
        <h1>Timing Details</h1>
        <p>Manage period and break timings for the timetable.</p>

        <form id="timingForm" method="POST" action="/admin/timing" class="border p-4 rounded shadow-sm bg-light">
            <div class="row g-3">
                <% periodTimings.forEach(function(timing) { %>
                    <div class="col-md-6">
                        <label class="form-label">
                            <% if (timing.is_break) { %>
                                <i class="fa-solid fa-mug-saucer"></i>
                                <b>Break <%= timing.period_number %></b>
                            <% } else { %>
                                <i class="fa-regular fa-clock"></i>
                                <b>Period <%= timing.period_number %></b>
                            <% } %>
                        </label>
                        <input type="text" class="form-control"
                            name="<%= timing.is_break ? `break_${timing.period_number}` : `period_${timing.period_number}` %>"
                            value="<%= timing.start_time + ' - ' + timing.end_time %>" required>
                    </div>
                <% }); %>
            </div>
            <div class="mt-4">
                <button type="submit" class="btn btn-success"><i class="bi bi-check-circle"></i> Save Timings</button>
            </div>
        </form>
    </div>
</div>
</body>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('saved') === 'true') {
        alert("Timings saved successfully!");
        window.history.replaceState(null, null, window.location.pathname);
    }
</script>
